// Code generated by lark_sdk_gen. DO NOT EDIT.
/**
 * Copyright 2022 chyroc
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package lark

import (
	"context"
)

// CreateCorehrDepartmentTree 支持传入部门ID（不传默认根部门）, 任意日期（不传默认当前日期）。从给定部门ID开始广度遍历, 每页最多返回2000行数据
//
// - 延迟说明: 该数据同步延迟 10s 以内, 即: 直接创建/更新对象后10s内调用此接口可能查询不到数据, 部门上下级关系变化10s内可能查询不到最新数据。
// - 如果对数据延迟较为敏感的场景, 可以考虑定期or延迟调用该接口, 或者走[批量查询部门V2](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/department/batch_get) 逐级查询组织架构
//
// doc: https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/department/tree
// new doc: https://open.feishu.cn/document/corehr-v1/organization-management/department/tree
func (r *CorehrService) CreateCorehrDepartmentTree(ctx context.Context, request *CreateCorehrDepartmentTreeReq, options ...MethodOptionFunc) (*CreateCorehrDepartmentTreeResp, *Response, error) {
	if r.cli.mock.mockCorehrCreateCorehrDepartmentTree != nil {
		r.cli.Log(ctx, LogLevelDebug, "[lark] Corehr#CreateCorehrDepartmentTree mock enable")
		return r.cli.mock.mockCorehrCreateCorehrDepartmentTree(ctx, request, options...)
	}

	req := &RawRequestReq{
		Scope:                 "Corehr",
		API:                   "CreateCorehrDepartmentTree",
		Method:                "POST",
		URL:                   r.cli.openBaseURL + "/open-apis/corehr/v2/departments/tree",
		Body:                  request,
		MethodOption:          newMethodOption(options),
		NeedTenantAccessToken: true,
	}
	resp := new(createCorehrDepartmentTreeResp)

	response, err := r.cli.RawRequest(ctx, req, resp)
	return resp.Data, response, err
}

// MockCorehrCreateCorehrDepartmentTree mock CorehrCreateCorehrDepartmentTree method
func (r *Mock) MockCorehrCreateCorehrDepartmentTree(f func(ctx context.Context, request *CreateCorehrDepartmentTreeReq, options ...MethodOptionFunc) (*CreateCorehrDepartmentTreeResp, *Response, error)) {
	r.mockCorehrCreateCorehrDepartmentTree = f
}

// UnMockCorehrCreateCorehrDepartmentTree un-mock CorehrCreateCorehrDepartmentTree method
func (r *Mock) UnMockCorehrCreateCorehrDepartmentTree() {
	r.mockCorehrCreateCorehrDepartmentTree = nil
}

// CreateCorehrDepartmentTreeReq ...
type CreateCorehrDepartmentTreeReq struct {
	PageSize         int64             `query:"page_size" json:"-"`          // 分页大小, 最大 100示例值: 100 取值范围: `1` ～ `2000`
	PageToken        *string           `query:"page_token" json:"-"`         // 分页标记, 第一次请求不填, 表示从头开始遍历；分页查询结果还有更多项时会同时返回新的 page_token, 下次遍历可采用该 page_token 获取查询结果示例值: 6891251722631890445
	DepartmentIDType *DepartmentIDType `query:"department_id_type" json:"-"` // 此次调用中使用的部门 ID 类型示例值: people_corehr_department_id可选值有: 【飞书】用来在具体某个应用中标识一个部门, 同一个department_id 在不同应用中的 open_department_id 相同。【飞书】用来标识租户内一个唯一的部门。【飞书人事】用来标识「飞书人事」中的部门。默认值: `people_corehr_department_id`
	DepartmentID     *string           `json:"department_id,omitempty"`      // 部门 ID, 默认根部门示例值: "6893014062142064111"
	NeedInactive     *bool             `json:"need_inactive,omitempty"`      // 是否包含失效部门, 默认false示例值: false
	EffectiveDate    *string           `json:"effective_date,omitempty"`     // 日期, 格式yyyy-mm-dd, 默认当前日期- 传2024-01-01, 即为返回2024-01-01的组织架构示例值: "2024-01-01" 最大长度: `10` 字符
}

// CreateCorehrDepartmentTreeResp ...
type CreateCorehrDepartmentTreeResp struct {
	Items     []*CreateCorehrDepartmentTreeRespItem `json:"items,omitempty"`      // 部门树节点
	PageToken string                                `json:"page_token,omitempty"` // 分页标记, 当 has_more 为 true 时, 会同时返回新的 page_token, 否则不返回 page_token
	HasMore   bool                                  `json:"has_more,omitempty"`   // 是否还有更多项
}

// CreateCorehrDepartmentTreeRespItem ...
type CreateCorehrDepartmentTreeRespItem struct {
	ID       string   `json:"id,omitempty"`       // 部门 ID- 可通过[批量查询部门V2](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/department/batch_get) 或者[搜索部门信息](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/department/search) 获取详情
	Level    int64    `json:"level,omitempty"`    // 部门绝对层级, 根部门层级为0, 根部门的子部门层级为1, 依次类推
	Children []string `json:"children,omitempty"` // 下级部门 ID 列表- 可通过[批量查询部门V2](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/department/batch_get) 或者[搜索部门信息](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/department/search) 获取详情
}

// createCorehrDepartmentTreeResp ...
type createCorehrDepartmentTreeResp struct {
	Code  int64                           `json:"code,omitempty"` // 错误码, 非 0 表示失败
	Msg   string                          `json:"msg,omitempty"`  // 错误描述
	Data  *CreateCorehrDepartmentTreeResp `json:"data,omitempty"`
	Error *ErrorDetail                    `json:"error,omitempty"`
}
