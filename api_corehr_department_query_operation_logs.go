// Code generated by lark_sdk_gen. DO NOT EDIT.
/**
 * Copyright 2022 chyroc
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package lark

import (
	"context"
)

// QueryCoreHRDepartmentOperationLogs 批量查询指定时间范围内的部门操作日志
//
// - 默认排序条件: 默认以操作时间倒序排序
// - 仅支持查询部门基础字段变更的操作日志, 对于角色字段变更的操作日志查询功能待上线
// - 时间窗支持大范围查询, 限定查询范围在366天以内, 例如要查询2020年1月1日至2023年1月1日的数据, 建议分成两次查询, 分别为2020年1月1日至2021年1月1日, 2022年1月2日至2023年1月1日, 不建议查询大时间范围数据
// - 支持查询批量部门的操作日志, 限定查询最大部门数为100, 查询部门数量大于100时, 建议分批查询
//
// doc: https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/department/query_operation_logs
// new doc: https://open.feishu.cn/document/corehr-v1/organization-management/department/query_operation_logs
func (r *CoreHRService) QueryCoreHRDepartmentOperationLogs(ctx context.Context, request *QueryCoreHRDepartmentOperationLogsReq, options ...MethodOptionFunc) (*QueryCoreHRDepartmentOperationLogsResp, *Response, error) {
	if r.cli.mock.mockCoreHRQueryCoreHRDepartmentOperationLogs != nil {
		r.cli.Log(ctx, LogLevelDebug, "[lark] CoreHR#QueryCoreHRDepartmentOperationLogs mock enable")
		return r.cli.mock.mockCoreHRQueryCoreHRDepartmentOperationLogs(ctx, request, options...)
	}

	req := &RawRequestReq{
		Scope:                 "CoreHR",
		API:                   "QueryCoreHRDepartmentOperationLogs",
		Method:                "POST",
		URL:                   r.cli.openBaseURL + "/open-apis/corehr/v2/departments/query_operation_logs",
		Body:                  request,
		MethodOption:          newMethodOption(options),
		NeedTenantAccessToken: true,
	}
	resp := new(queryCoreHRDepartmentOperationLogsResp)

	response, err := r.cli.RawRequest(ctx, req, resp)
	return resp.Data, response, err
}

// MockCoreHRQueryCoreHRDepartmentOperationLogs mock CoreHRQueryCoreHRDepartmentOperationLogs method
func (r *Mock) MockCoreHRQueryCoreHRDepartmentOperationLogs(f func(ctx context.Context, request *QueryCoreHRDepartmentOperationLogsReq, options ...MethodOptionFunc) (*QueryCoreHRDepartmentOperationLogsResp, *Response, error)) {
	r.mockCoreHRQueryCoreHRDepartmentOperationLogs = f
}

// UnMockCoreHRQueryCoreHRDepartmentOperationLogs un-mock CoreHRQueryCoreHRDepartmentOperationLogs method
func (r *Mock) UnMockCoreHRQueryCoreHRDepartmentOperationLogs() {
	r.mockCoreHRQueryCoreHRDepartmentOperationLogs = nil
}

// QueryCoreHRDepartmentOperationLogsReq ...
type QueryCoreHRDepartmentOperationLogsReq struct {
	PageSize         int64             `query:"page_size" json:"-"`          // 分页大小, 最大 1000示例值: 100 取值范围: `1` ～ `1000`
	PageToken        *string           `query:"page_token" json:"-"`         // 分页标记, 第一次请求不填, 表示从头开始遍历；分页查询结果还有更多项时会同时返回新的 page_token, 下次遍历可采用该 page_token 获取查询结果示例值: 2
	DepartmentIDType *DepartmentIDType `query:"department_id_type" json:"-"` // 此次调用中使用的部门 ID 类型示例值: people_corehr_department_id可选值有: 【飞书】用来在具体某个应用中标识一个部门, 同一个department_id 在不同应用中的 open_department_id 相同。【飞书】用来标识租户内一个唯一的部门。【飞书人事】用来标识「飞书人事」中的部门。默认值: `people_corehr_department_id`
	DepartmentIDs    []string          `json:"department_ids,omitempty"`     // 部门ID列表, ID获取方式: 调用[【创建部门】](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/department/create)、[【搜索部门】](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/department/search)接口可以返回部门ID- 也可以通过[【事件】创建部门](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/department/events/created)、[【事件】更新部门](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/reference/corehr-v1/department/events/updated) 获取部门ID示例值: ["7094136522860922222"] 长度范围: `1` ～ `100`
	StartDate        string            `json:"start_date,omitempty"`         // 查询的起始操作日期, 格式 "YYYY-MM-DD", 不带时分秒, 包含start_date传入的时间, 系统会以start_date的00:00:00为开始时间进行查询示例值: "2023-01-01"
	EndDate          string            `json:"end_date,omitempty"`           // 查询的截止操作日期, 注意事项: 格式 "YYYY-MM-DD", 不带时分秒, 包含end_date传入的时间, 系统会以end_date的23:59:59为截止时间进行查询。- 查询截止日期end_date应大于起始日期start_date, 起止日期跨度最大为366天示例值: "2024-01-01"
}

// QueryCoreHRDepartmentOperationLogsResp ...
type QueryCoreHRDepartmentOperationLogsResp struct {
	OpLogs        []*QueryCoreHRDepartmentOperationLogsRespOpLog `json:"op_logs,omitempty"`         // 操作日志列表
	NextPageToken string                                         `json:"next_page_token,omitempty"` // 下一页token
	HasMore       bool                                           `json:"has_more,omitempty"`        // 是否还有更多项
}

// QueryCoreHRDepartmentOperationLogsRespOpLog ...
type QueryCoreHRDepartmentOperationLogsRespOpLog struct {
	ObjectID        string                                               `json:"object_id,omitempty"`        // 部门ID
	Changes         []*QueryCoreHRDepartmentOperationLogsRespOpLogChange `json:"changes,omitempty"`          // 字段变化列表
	Operator        string                                               `json:"operator,omitempty"`         // 操作人工号, 更多详细信息可通过[【搜索员工信息】](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/employee/search)接口获取
	OperationType   int64                                                `json:"operation_type,omitempty"`   // 操作类型。现有如下类型: `10`: 新建部门记录- `20`: 新建/复制部门版本- `50`: 编辑部门版本- `60`: 撤销部门版本- `70`: 停用部门- `80`: 启用部门- `90`: 删除部门记录- `100`: 自定义部门排序- `110`: 更新部门- `120`: 编辑部门关联规则
	OperationTime   string                                               `json:"operation_time,omitempty"`   // 操作时间, 带时分秒。示例值: 2023-11-15 19:25:45
	EffectiveTime   string                                               `json:"effective_time,omitempty"`   // 操作生效时间, 表示被操作的部门版本的生效日期。示例值: 2023-10-28
	OperationReason string                                               `json:"operation_reason,omitempty"` // 操作原因说明
	ChangeReasons   []string                                             `json:"change_reasons,omitempty"`   // 调整原因列表
}

// QueryCoreHRDepartmentOperationLogsRespOpLogChange ...
type QueryCoreHRDepartmentOperationLogsRespOpLogChange struct {
	Field  string `json:"field,omitempty"`  // 变更字段
	Before string `json:"before,omitempty"` // 旧值
	After  string `json:"after,omitempty"`  // 新值
}

// queryCoreHRDepartmentOperationLogsResp ...
type queryCoreHRDepartmentOperationLogsResp struct {
	Code  int64                                   `json:"code,omitempty"` // 错误码, 非 0 表示失败
	Msg   string                                  `json:"msg,omitempty"`  // 错误描述
	Data  *QueryCoreHRDepartmentOperationLogsResp `json:"data,omitempty"`
	Error *ErrorDetail                            `json:"error,omitempty"`
}
