// Code generated by lark_sdk_gen. DO NOT EDIT.
/**
 * Copyright 2022 chyroc
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package lark

import (
	"context"
)

// QueryPerformanceMetricDetail 批量获取指定周期中被评估人的关键指标结果。
//
// doc: https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/performance-v2/metric_detail/query
// new doc: https://open.feishu.cn/document/performance-v1/metric_detail/query
func (r *PerformanceService) QueryPerformanceMetricDetail(ctx context.Context, request *QueryPerformanceMetricDetailReq, options ...MethodOptionFunc) (*QueryPerformanceMetricDetailResp, *Response, error) {
	if r.cli.mock.mockPerformanceQueryPerformanceMetricDetail != nil {
		r.cli.Log(ctx, LogLevelDebug, "[lark] Performance#QueryPerformanceMetricDetail mock enable")
		return r.cli.mock.mockPerformanceQueryPerformanceMetricDetail(ctx, request, options...)
	}

	req := &RawRequestReq{
		Scope:                 "Performance",
		API:                   "QueryPerformanceMetricDetail",
		Method:                "POST",
		URL:                   r.cli.openBaseURL + "/open-apis/performance/v2/metric_details/query",
		Body:                  request,
		MethodOption:          newMethodOption(options),
		NeedTenantAccessToken: true,
	}
	resp := new(queryPerformanceMetricDetailResp)

	response, err := r.cli.RawRequest(ctx, req, resp)
	return resp.Data, response, err
}

// MockPerformanceQueryPerformanceMetricDetail mock PerformanceQueryPerformanceMetricDetail method
func (r *Mock) MockPerformanceQueryPerformanceMetricDetail(f func(ctx context.Context, request *QueryPerformanceMetricDetailReq, options ...MethodOptionFunc) (*QueryPerformanceMetricDetailResp, *Response, error)) {
	r.mockPerformanceQueryPerformanceMetricDetail = f
}

// UnMockPerformanceQueryPerformanceMetricDetail un-mock PerformanceQueryPerformanceMetricDetail method
func (r *Mock) UnMockPerformanceQueryPerformanceMetricDetail() {
	r.mockPerformanceQueryPerformanceMetricDetail = nil
}

// QueryPerformanceMetricDetailReq ...
type QueryPerformanceMetricDetailReq struct {
	UserIDType      *IDType  `query:"user_id_type" json:"-"`      // 用户 ID 类型示例值: open_id可选值有: 标识一个用户在某个应用中的身份。同一个用户在不同应用中的 Open ID 不同。[了解更多: 如何获取 Open ID](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-obtain-openid)标识一个用户在某个应用开发商下的身份。同一用户在同一开发商下的应用中的 Union ID 是相同的, 在不同开发商下的应用中的 Union ID 是不同的。通过 Union ID, 应用开发商可以把同个用户在多个应用中的身份关联起来。[了解更多: 如何获取 Union ID？](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-obtain-union-id)标识一个用户在某个租户内的身份。同一个用户在租户 A 和租户 B 内的 User ID 是不同的。在同一个租户内, 一个用户的 User ID 在所有应用（包括商店应用）中都保持一致。User ID 主要用于在不同的应用间打通用户数据。[了解更多: 如何获取 User ID？](https://open.feishu.cn/document/uAjLw4CM/ugTN1YjL4UTN24CO1UjN/trouble-shooting/how-to-obtain-user-id)以people_admin_id来识别用户默认值: `open_id`当值为 `user_id`, 字段权限要求: 获取用户 user ID
	SemesterID      string   `json:"semester_id,omitempty"`       // 周期 ID, 1 次只允许查询 1 个周期, semester_id 可通过【[获取周期](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/performance-v1/semester/list)】接口获得示例值: "6992035450862224940"
	RevieweeUserIDs []string `json:"reviewee_user_ids,omitempty"` // 被评估人 ID 列表, 与入参 `user_id_type` 类型一致示例值: ["ou_3245842393d09e9428ad4655da6e30b3"] 长度范围: `1` ～ `50`
}

// QueryPerformanceMetricDetailResp ...
type QueryPerformanceMetricDetailResp struct {
	SemesterID      string                                            `json:"semester_id,omitempty"`      // 周期 ID, 详情可查看: [获取周期](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/performance-v1/semester/list)
	RevieweeMetrics []*QueryPerformanceMetricDetailRespRevieweeMetric `json:"reviewee_metrics,omitempty"` // 指标明细列表
}

// QueryPerformanceMetricDetailRespRevieweeMetric ...
type QueryPerformanceMetricDetailRespRevieweeMetric struct {
	RevieweeUserID        *QueryPerformanceMetricDetailRespRevieweeMetricRevieweeUserID         `json:"reviewee_user_id,omitempty"`        // 被评估人
	MetricTemplateID      string                                                                `json:"metric_template_id,omitempty"`      // 指标模板 ID, 详情可查看: [获取指标模板列表](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/performance-v2/metric_template/query)
	MetricDetails         *QueryPerformanceMetricDetailRespRevieweeMetricMetricDetails          `json:"metric_details,omitempty"`          // 指标详情
	RevieweeStageStatuses []*QueryPerformanceMetricDetailRespRevieweeMetricRevieweeStageStatuse `json:"reviewee_stage_statuses,omitempty"` // 指标对应的环节状态
}

// QueryPerformanceMetricDetailRespRevieweeMetricMetricDetails ...
type QueryPerformanceMetricDetailRespRevieweeMetricMetricDetails struct {
	MetricID        string                                                                    `json:"metric_id,omitempty"`        // 指标 ID, 详情可查看: [获取指标列表](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/performance-v2/metric_lib/query)
	Name            string                                                                    `json:"name,omitempty"`             // 指标名称, 指标在该明细数据中的名称
	Fields          []*QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsField       `json:"fields,omitempty"`           // 指标字段信息
	DimensionID     string                                                                    `json:"dimension_id,omitempty"`     // 指标维度 ID
	DimensionName   *QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsDimensionName `json:"dimension_name,omitempty"`   // 指标维度名称
	DimensionWeight string                                                                    `json:"dimension_weight,omitempty"` // 指标维度权重, 如果没有设置则返回为空, 单位为百分比
	AddFrom         string                                                                    `json:"add_from,omitempty"`         // 指标添加来源可选值有: 指标制定人添加管理员添加
	IsFromLibrary   bool                                                                      `json:"is_from_library,omitempty"`  // 指标是否引自指标库
}

// QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsDimensionName ...
type QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsDimensionName struct {
	ZhCn string `json:"zh_cn,omitempty"` // 指标维度中文名称
	EnUs string `json:"en_us,omitempty"` // 指标维度英文名称
}

// QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsField ...
type QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsField struct {
	FieldID          string                                                                            `json:"field_id,omitempty"`           // 指标字段 ID, 详情可查看: [获取指标字段列表](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/performance-v2/metric_field/query)
	FieldValue       string                                                                            `json:"field_value,omitempty"`        // 指标字段值
	FieldValuePerson *QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsFieldFieldValuePerson `json:"field_value_person,omitempty"` // 字段值, 当字段为人员信息时有值
}

// QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsFieldFieldValuePerson ...
type QueryPerformanceMetricDetailRespRevieweeMetricMetricDetailsFieldFieldValuePerson struct {
	OpenID string `json:"open_id,omitempty"` // 用户的 open_id
	UserID string `json:"user_id,omitempty"` // 用户的 user_id, 取值与user_id_type一致
}

// QueryPerformanceMetricDetailRespRevieweeMetricRevieweeStageStatuse ...
type QueryPerformanceMetricDetailRespRevieweeMetricRevieweeStageStatuse struct {
	StageID     string `json:"stage_id,omitempty"`     // 环节ID
	StageType   string `json:"stage_type,omitempty"`   // 环节类型可选值有: - `kpi_metric_setting`: 指标制定环节  - `kpi_result_recording`: 结果录入环节
	StageStatus int64  `json:"stage_status,omitempty"` // 环节状态可选值有: - `0`: 未开始  - `1`: 待提交  - `2`: 已逾期  - `3`: 确认中  - `4`: 被驳回  - `5`: 已完成
}

// QueryPerformanceMetricDetailRespRevieweeMetricRevieweeUserID ...
type QueryPerformanceMetricDetailRespRevieweeMetricRevieweeUserID struct {
	OpenID string `json:"open_id,omitempty"` // 用户的 open_id
	UserID string `json:"user_id,omitempty"` // 用户的 user_id, 与入参 `user_id_type` 类型一致
}

// queryPerformanceMetricDetailResp ...
type queryPerformanceMetricDetailResp struct {
	Code  int64                             `json:"code,omitempty"` // 错误码, 非 0 表示失败
	Msg   string                            `json:"msg,omitempty"`  // 错误描述
	Data  *QueryPerformanceMetricDetailResp `json:"data,omitempty"`
	Error *ErrorDetail                      `json:"error,omitempty"`
}
