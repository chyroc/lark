// Code generated by lark_sdk_gen. DO NOT EDIT.
/**
 * Copyright 2022 chyroc
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package lark

import (
	"context"
)

// QueryPayrollDatasourceRecord 1. 支持通过payroll_period（必传）、employment_id（可选）这两个预置字段, 批量查询指定数据源下的数据记录列表。
//
// 2. 数据源配置信息可从[获取外部数据源配置信息](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/payroll-v1/datasource/list)或者 「飞书人事后台-设置-算薪数据设置-外部数据源配置」页面 获取
//
// doc: https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/payroll-v1/datasource_record/query
func (r *PayrollService) QueryPayrollDatasourceRecord(ctx context.Context, request *QueryPayrollDatasourceRecordReq, options ...MethodOptionFunc) (*QueryPayrollDatasourceRecordResp, *Response, error) {
	if r.cli.mock.mockPayrollQueryPayrollDatasourceRecord != nil {
		r.cli.Log(ctx, LogLevelDebug, "[lark] Payroll#QueryPayrollDatasourceRecord mock enable")
		return r.cli.mock.mockPayrollQueryPayrollDatasourceRecord(ctx, request, options...)
	}

	req := &RawRequestReq{
		Scope:                 "Payroll",
		API:                   "QueryPayrollDatasourceRecord",
		Method:                "POST",
		URL:                   r.cli.openBaseURL + "/open-apis/payroll/v1/datasource_records/query",
		Body:                  request,
		MethodOption:          newMethodOption(options),
		NeedTenantAccessToken: true,
		NeedUserAccessToken:   true,
	}
	resp := new(queryPayrollDatasourceRecordResp)

	response, err := r.cli.RawRequest(ctx, req, resp)
	return resp.Data, response, err
}

// MockPayrollQueryPayrollDatasourceRecord mock PayrollQueryPayrollDatasourceRecord method
func (r *Mock) MockPayrollQueryPayrollDatasourceRecord(f func(ctx context.Context, request *QueryPayrollDatasourceRecordReq, options ...MethodOptionFunc) (*QueryPayrollDatasourceRecordResp, *Response, error)) {
	r.mockPayrollQueryPayrollDatasourceRecord = f
}

// UnMockPayrollQueryPayrollDatasourceRecord un-mock PayrollQueryPayrollDatasourceRecord method
func (r *Mock) UnMockPayrollQueryPayrollDatasourceRecord() {
	r.mockPayrollQueryPayrollDatasourceRecord = nil
}

// QueryPayrollDatasourceRecordReq ...
type QueryPayrollDatasourceRecordReq struct {
	PageSize       int64                                         `query:"page_size" json:"-"`       // 示例值: 10 取值范围: `1` ～ `100`
	PageToken      *string                                       `query:"page_token" json:"-"`      // 分页标记, 第一次请求不填, 表示从头开始遍历；分页查询结果还有更多项时会同时返回新的 page_token, 下次遍历可采用该 page_token 获取查询结果示例值: eVQrYzJBNDNONlk4VFZBZVlSdzlKdFJ4bVVHVExENDNKVHoxaVdiVnViQT0=
	SourceCode     string                                        `json:"source_code,omitempty"`     // 数据源code示例值: "test__c"
	SelectedFields []string                                      `json:"selected_fields,omitempty"` // 指定查询的数据源字段code。1. 如不传入此字段, 默认返回所有数据源字段2. 如果传入, 除了返回指定字段外, 系统会默认返回emplyment_id、payroll_period字段的值。示例值: ["test__c"] 长度范围: `1` ～ `200`
	FieldFilters   []*QueryPayrollDatasourceRecordReqFieldFilter `json:"field_filters,omitempty"`   // 查询条件列表, 多个条件之间为And关系, 支持的查询条件如下: 1. employment_id- 非必传, 最多传入100个, field_type=3（文本类型）。- 该id为飞书人事中员工的基本信息id, 可通过[搜索员工信息](https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/corehr-v2/employee/search)获取.- 查询操作符只支持IsAnyOf（包含）2. 时间范围条件必传, 根据数据源的不同数据写入维度, 支持的时间范围查询条件如下: 算薪期间维度。payroll_period字段, 格式: 2024-01, 查询方式: IsAnyOf操作符枚举需要查的月份, 最多可查2个月。- 数据发生日期维度（灰度中）。occur_day字段, 格式2024-01-02, 查询方式: 通过InDateRange操作符查询（日期范围查询）, occur_day的时间范围不允许超过90天, 自定义数据周期维度（灰度中）。custom_start、custom_end字段, 格式: 2024-01-02。查询方式: 两者都必传, 通过InDateRange操作符查询（日期范围查询）, 时间范围不允许超过90天。 最大长度: `100`
}

// QueryPayrollDatasourceRecordReqFieldFilter ...
type QueryPayrollDatasourceRecordReqFieldFilter struct {
	FieldCode   string   `json:"field_code,omitempty"`   // 字段编码示例值: "employment_id"
	FieldValues []string `json:"field_values,omitempty"` // 包含的字段值列表。示例值: ["123"] 长度范围: `1` ～ `500`
	Operator    *int64   `json:"operator,omitempty"`     // 查询操作符, 不传默认为IsAnyOf 包含查询。示例值: 1可选值有: IsAnyOf 包含查询, 被查询记录的字段值被field_values列表包含即可。InDateRange 日期范围查询。field_values长度必须为2, 类似[startDate, endDate], 前后都是闭区间；其中日期格式为“2024-01-02”, 仅occur_day、custom_start、custom_end字段支持此查询方式, 且时间范围不超过90天。 取值范围: `1` ～ `2`
}

// QueryPayrollDatasourceRecordResp ...
type QueryPayrollDatasourceRecordResp struct {
	PageToken string                                    `json:"page_token,omitempty"` // 分页标记, 当 has_more 为 true 时, 会同时返回新的 page_token, 否则不返回 page_token
	HasMore   bool                                      `json:"has_more,omitempty"`   // 是否还有更多项
	Records   []*QueryPayrollDatasourceRecordRespRecord `json:"records,omitempty"`    // 数据记录列表
}

// QueryPayrollDatasourceRecordRespRecord ...
type QueryPayrollDatasourceRecordRespRecord struct {
	ActiveStatus int64                                               `json:"active_status,omitempty"` // 记录的启停用状态可选值有: 已启用已停用
	FieldValues  []*QueryPayrollDatasourceRecordRespRecordFieldValue `json:"field_values,omitempty"`  // 记录的字段值列表
}

// QueryPayrollDatasourceRecordRespRecordFieldValue ...
type QueryPayrollDatasourceRecordRespRecordFieldValue struct {
	FieldCode string `json:"field_code,omitempty"` // 数据源字段编码
	Value     string `json:"value,omitempty"`      // 字段值 通过string传输, 值为API写入的值。
	FieldType int64  `json:"field_type,omitempty"` // 字段类型。可从「查询外部数据源设置」API 或者 「飞书人事后台-设置-算薪数据设置-外部数据源配置」页面 获取。1. 金额2. 数值3. 文本4. 日期5. 百分比
}

// queryPayrollDatasourceRecordResp ...
type queryPayrollDatasourceRecordResp struct {
	Code  int64                             `json:"code,omitempty"` // 错误码, 非 0 表示失败
	Msg   string                            `json:"msg,omitempty"`  // 错误描述
	Data  *QueryPayrollDatasourceRecordResp `json:"data,omitempty"`
	Error *ErrorDetail                      `json:"error,omitempty"`
}
