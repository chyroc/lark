// Code generated by lark_sdk_gen. DO NOT EDIT.
/**
 * Copyright 2022 chyroc
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package lark

import (
	"context"
)

// StartAilyAppSkill 该 API 用于调用某个 Aily 应用的特定技能, 支持指定技能入参；并同步返回技能执行的结果。
//
// 更多信息及示例代码, 可参考 [Aily 技能 OpenAPI 接口说明](https://bytedance.larkoffice.com/wiki/ZkKnwxogliNj3ik9ppEc0cFUnAd)。
// > 技能 API 能显著简化业务系统的集成工作（单轮 API 调用）。技能 API 提供更贴合系统间服务调用的参数传递模式（JSON 入参 / 出参）, 且无需通过文本消息对话的方式调用 AI 能力。
// :::html
// <div style="text-align: center;">
// <img src="https://lf3-static.bytednsdoc.com/obj/eden-cn/10eh7pbovhfnuhd/aily_skill_intro.png?x-resource-account=public" width="600" />
//
// doc: https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/aily-v1/app-skill/start
// new doc: https://open.feishu.cn/document/aily-v1/app-skill/start
func (r *AilyService) StartAilyAppSkill(ctx context.Context, request *StartAilyAppSkillReq, options ...MethodOptionFunc) (*StartAilyAppSkillResp, *Response, error) {
	if r.cli.mock.mockAilyStartAilyAppSkill != nil {
		r.cli.Log(ctx, LogLevelDebug, "[lark] Aily#StartAilyAppSkill mock enable")
		return r.cli.mock.mockAilyStartAilyAppSkill(ctx, request, options...)
	}

	req := &RawRequestReq{
		Scope:                 "Aily",
		API:                   "StartAilyAppSkill",
		Method:                "POST",
		URL:                   r.cli.openBaseURL + "/open-apis/aily/v1/apps/:app_id/skills/:skill_id/start",
		Body:                  request,
		MethodOption:          newMethodOption(options),
		NeedTenantAccessToken: true,
		NeedUserAccessToken:   true,
	}
	resp := new(startAilyAppSkillResp)

	response, err := r.cli.RawRequest(ctx, req, resp)
	return resp.Data, response, err
}

// MockAilyStartAilyAppSkill mock AilyStartAilyAppSkill method
func (r *Mock) MockAilyStartAilyAppSkill(f func(ctx context.Context, request *StartAilyAppSkillReq, options ...MethodOptionFunc) (*StartAilyAppSkillResp, *Response, error)) {
	r.mockAilyStartAilyAppSkill = f
}

// UnMockAilyStartAilyAppSkill un-mock AilyStartAilyAppSkill method
func (r *Mock) UnMockAilyStartAilyAppSkill() {
	r.mockAilyStartAilyAppSkill = nil
}

// StartAilyAppSkillReq ...
type StartAilyAppSkillReq struct {
	XAilyBizUserID *string                             `header:"X-Aily-BizUserID" json:"-"` // 标识创建会话的唯一用户 ID>  建议使用唯一内部 ID 或其他可标识用户唯一身份的字段（如飞书账号的 `user_id`）, 可用于分析来自 API 的具体用户示例值: "ou_5ad573a6411d72b8305fda3a9c15c70e" 长度范围: `0` ～ `255` 字符
	AppID          string                              `path:"app_id" json:"-"`             // Aily 应用 ID（`spring_xxx__c`）, 可以在 Aily 应用开发页面的浏览器地址里获取示例值: "spring_e7004f87f1__c" 长度范围: `0` ～ `64` 字符
	SkillID        string                              `path:"skill_id" json:"-"`           // 技能 ID；可通过技能编辑页面的浏览器地址栏获取（`skill_xxx`）示例值: "skill_6cc6166178ca" 长度范围: `0` ～ `32` 字符
	GlobalVariable *StartAilyAppSkillReqGlobalVariable `json:"global_variable,omitempty"`   // 技能的全局变量
	Input          *string                             `json:"input,omitempty"`             // 技能的自定义变量示例值: "{\"custom_string\":\"my string\", \"custom_integer\":22}" 长度范围: `0` ～ `40960` 字符
}

// StartAilyAppSkillReqGlobalVariable ...
type StartAilyAppSkillReqGlobalVariable struct {
	Query   *string                                    `json:"query,omitempty"`   // 触发技能的消息文本；即用户在飞书机器人等渠道对话输入的内容示例值: "你好" 长度范围: `0` ～ `40960` 字符
	Files   []string                                   `json:"files,omitempty"`   // 触发技能的文件信息（如 OCR 节点等所需消费的图片文件）> 如技能不需要文件, `files` 参数传空即可示例值: ["file_4d9nu1ev3a2rq"] 长度范围: `0` ～ `32`
	Channel *StartAilyAppSkillReqGlobalVariableChannel `json:"channel,omitempty"` // 渠道信息
}

// StartAilyAppSkillReqGlobalVariableChannel ...
type StartAilyAppSkillReqGlobalVariableChannel struct {
	Variables *string `json:"variables,omitempty"` // 自定义传入的变量；可在 Workflow 技能全局变量中消费示例值: "{"custom_key": "custom_value"}" 长度范围: `0` ～ `255` 字符
}

// StartAilyAppSkillResp ...
type StartAilyAppSkillResp struct {
	Output string `json:"output,omitempty"` // 技能的输出
	Status string `json:"status,omitempty"` // 技能的执行状态
}

// startAilyAppSkillResp ...
type startAilyAppSkillResp struct {
	Code  int64                  `json:"code,omitempty"` // 错误码, 非 0 表示失败
	Msg   string                 `json:"msg,omitempty"`  // 错误描述
	Data  *StartAilyAppSkillResp `json:"data,omitempty"`
	Error *ErrorDetail           `json:"error,omitempty"`
}
