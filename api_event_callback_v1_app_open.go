// Code generated by lark_sdk_gen. DO NOT EDIT.
/**
 * Copyright 2022 chyroc
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

package lark

import (
	"context"
)

// EventV1AppOpen 当前租户首次安装并启用应用时, 触发当前事件。启用应用包含以下场景:
//
// - 租户管理员在后台首次开通应用
// - 租户普通成员首次申请安装应用
// - 租户普通成员免审安装应用
// ## 前提条件
// 你必须为应用订阅该事件, 才会在事件触发时接收到事件信息。详情了解[事件订阅概述](https://open.feishu.cn/document/ukTMukTMukTM/uUTNz4SN1MjL1UzM)。
// ## 使用限制
// - 只有商店应用才能订阅此事件。自建应用无此事件。
// - 不同启用场景所返回的参数不同, 具体说明如下:
// --应用由租户管理员直接安装, 返回 `installer` 参数, 不返回 `installer_employee` 参数。
// --应用由租户普通成员发起申请, 待租户管理员通过审批后安装, 返回 `installer` 参数, 不返回 `installer_employee` 参数。
// --应用由普通成员免审安装, 返回 `installer_employee` 参数, 不返回 `installer` 参数。了解免审安装应用参考[员工免审安装应用](https://open.feishu.cn/document/uAjLw4CM/uYjL24iN/platform-overveiw/develop-process/configuring-employee-review-free-installation)。
//
// doc: https://open.feishu.cn/document/uAjLw4CM/ukTMukTMukTM/application-v6/event/app-first-enabled
// new doc: https://open.feishu.cn/document/server-docs/application-v6/event/app-first-enabled
func (r *EventCallbackService) HandlerEventV1AppOpen(f EventV1AppOpenHandler) {
	r.cli.eventHandler.eventV1AppOpenHandler = f
}

// EventV1AppOpenHandler event EventV1AppOpen handler
type EventV1AppOpenHandler func(ctx context.Context, cli *Lark, schema string, header *EventHeaderV1, event *EventV1AppOpen) (string, error)

// EventV1AppOpen ...
type EventV1AppOpen struct {
	AppID             string                          `json:"app_id,omitempty"`             // 开通的应用ID. 如: cli_xxx
	TenantKey         string                          `json:"tenant_key,omitempty"`         // 开通应用的企业唯一标识. 如: xxx
	Type              string                          `json:"type,omitempty"`               // 事件类型. 如: app_open
	Applicants        []*EventV1AppOpenEventApplicant `json:"applicants,omitempty"`         // 应用的申请者, 可能有多个
	Installer         map[string]interface{}          `json:"installer,omitempty"`          // 租户管理员直接安装应用、租户普通成员申请安装应用时, 返回此字段。
	InstallerEmployee map[string]interface{}          `json:"installer_employee,omitempty"` // 租户普通成员免审安装应用时, 返回此字段。
}

// EventV1AppOpenEventApplicant ...
type EventV1AppOpenEventApplicant struct {
	OpenID string `json:"open_id,omitempty"` // 用户对此应用的唯一标识, 同一用户对不同应用的open_id不同. 如: xxx
}

// EventV1AppOpenEventInstaller ...
type EventV1AppOpenEventInstaller struct {
	OpenID string `json:"open_id,omitempty"` // 用户对此应用的唯一标识, 同一用户对不同应用的open_id不同. 如: xxx
}

// EventV1AppOpenEventInstallerEmployee ...
type EventV1AppOpenEventInstallerEmployee struct {
	OpenID string `json:"open_id,omitempty"` // 用户对此应用的唯一标识, 同一用户对不同应用的open_id不同. 如: xxx
}

// EventV1AppOpenResp ...
type EventV1AppOpenResp struct {
}

// eventV1AppOpenResp ...
type eventV1AppOpenResp struct {
	Code  int64               `json:"code,omitempty"`
	Msg   string              `json:"msg,omitempty"`
	Data  *EventV1AppOpenResp `json:"data,omitempty"`
	Error *ErrorDetail        `json:"error,omitempty"`
}
